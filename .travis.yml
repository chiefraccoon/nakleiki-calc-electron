matrix:
  include:
    - os: windows
      language: node_js
      node_js:
        - node
      addons:
        artifacts:
          working_dir: release
      script:
        - travis_wait 20 yarn package-win
    - os: osx
      language: node_js
      node_js:
        - node
      addons:
        artifacts:
          working_dir: release
      script:
        - travis_wait 20 yarn package-mac

cache:
  yarn: true
  directories:
    - node_modules
    - $(npm config get prefix)/lib/node_modules
#    - flow-typed
#    - $HOME/.cache/electron
#    - $HOME/.cache/electron-builder

install:
  - yarn --ignore-engines

deploy:
  provider: releases
  api_key: $GH_TOKEN
  file_glob: true
  file: release/*.zip
  skip_cleanup: true

